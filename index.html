<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ú–µ–Ω—é</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="–ú–µ–Ω—é">

<!-- –ò–∫–æ–Ω–∫–∞ –¥–ª—è —è—Ä–ª—ã–∫–∞ -->
<link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/7064/7064359.png">
  <style>
:root {
  --bg: #e9f7ec;
  --card: #fff;
  --text: #1b4332;
  --accent: #2d6a4f;
  --accent-hover: #1b4332;
  --shadow: rgba(0,0,0,0.15);
}
body.dark {
  --bg: #1b4332;
  --card: #2d6a4f;
  --text: #f1f8f5;
  --accent: #95d5b2;
  --accent-hover: #74c69d;
  --shadow: rgba(0,0,0,0.5);
}

body, html {
  margin: 0;
  padding: 0;
  font-family: "Segoe UI", sans-serif;
  background: var(--bg);
  color: var(--text);
  height: 100%;
  width: 100%;
  max-width: 100%;
  overflow-x: hidden; /* —É–±–∏—Ä–∞–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª */
}

header {
  text-align: center;
  padding: 15px 20px;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: var(--bg);
  z-index: 100;
  box-shadow: 0 2px 6px var(--shadow);
}
header .header-content {
  display: inline-flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}
header h1 {
  margin: 0;
  font-size: 22px;
  color: var(--text);
}
header button {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 6px 10px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.3s ease;
  font-size: 14px;
}
header button:hover { background: var(--accent-hover); }

main {
  position: relative;
  top: 80px;
  min-height: calc(100vh - 80px);
  width: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 15px;
  box-sizing: border-box;
}

.page {
  position: absolute;
  top: 0;
  left: 100%;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  padding: 15px;
  transition: left 0.4s ease;
}
.page.active { left: 0; }

.menu {
  display: grid;
  gap: 16px;
  width: 100%;
  max-width: 100%;   /* —É–±—Ä–∞–ª–∏ —Ñ–∏–∫—Å 1200px */
  margin: 0 auto;
  box-sizing: border-box;
  grid-template-columns: 1fr; /* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–¥–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ */
}

/* –ü–ª–∞–Ω—à–µ—Ç—ã ‚Äî 2 –∫–∞—Ä—Ç–æ—á–∫–∏ */
@media (min-width: 481px) and (max-width: 768px) {
  .menu {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* –ù–æ—É—Ç–±—É–∫–∏ ‚Äî 3 –∫–∞—Ä—Ç–æ—á–∫–∏ */
@media (min-width: 769px) and (max-width: 1024px) {
  .menu {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* –î–µ—Å–∫—Ç–æ–ø—ã ‚Äî 4 –∫–∞—Ä—Ç–æ—á–∫–∏ */
@media (min-width: 1025px) {
  .menu {
    grid-template-columns: repeat(4, 1fr);
  }
}

.card {
  background: var(--card);
  border-radius: 16px;
  box-shadow: 0 6px 18px var(--shadow);
  padding: 20px;
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
}
.card h2 {
  font-size: 20px;
  margin-bottom: 12px;
  color: var(--accent);
  border-bottom: 2px solid var(--accent-hover);
  padding-bottom: 6px;
  text-align: center;
}
.card ul {
  list-style: none;
  padding: 0;
  margin: 0 0 10px 0;
}
.card ul li {
  padding: 10px;
  border-bottom: 1px solid #ccc;
  font-size: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  box-sizing: border-box;
}
.card ul li:hover { background: rgba(0,0,0,0.05); }
.dish-info {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}
.dish-info img {
  width: 36px;
  height: 36px;
  object-fit: cover;
  border-radius: 6px;
}
.btn {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 10px;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.3s ease;
  margin-top: 5px;
}
.btn:hover { background: var(--accent-hover); }
.delete-btn {
  background: none;
  border: none;
  color: #cc0000;
  font-size: 18px;
  cursor: pointer;
  padding: 0 5px;
  opacity: 0;
  transition: opacity 0.2s ease;
}
.card ul li:hover .delete-btn { opacity: 1; }

#recipePage img {
  max-width: 100%;
  max-height: 280px;
  object-fit: cover;
  border-radius: 12px;
  margin-bottom: 15px;
  display: none;
}


  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <h1 id="pageTitle">–ú–µ–Ω—é</h1>
      <button id="themeToggle">üåô –¢–µ–º–∞</button>
      <button id="refreshBtn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>
  </header>

  <main>
    <!-- –ì–ª–∞–≤–Ω–∞—è -->
    <div id="menuPage" class="page active">
      <div class="menu">
        <div class="card">
          <h2>ü•ê –ó–∞–≤—Ç—Ä–∞–∫–∏</h2>
          <ul id="breakfast"></ul>
          <button class="btn" onclick="addDish('breakfast')">–î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</button>
        </div>
        <div class="card">
          <h2>üç≤ –ì–æ—Ä—è—á–µ–µ</h2>
          <ul id="hot"></ul>
          <button class="btn" onclick="addDish('hot')">–î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</button>
        </div>
        <div class="card">
          <h2>ü•ß –í—ã–ø–µ—á–∫–∞</h2>
          <ul id="bakery"></ul>
          <button class="btn" onclick="addDish('bakery')">–î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</button>
        </div>
        <div class="card">
          <h2>ü•ó –°–∞–ª–∞—Ç—ã</h2>
          <ul id="salads"></ul>
          <button class="btn" onclick="addDish('salads')">–î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</button>
        </div>
      </div>
    </div>

    <!-- –†–µ—Ü–µ–ø—Ç -->
    <div id="recipePage" class="page">
      <h2 id="recipeTitle"></h2>
      <img id="recipeImage" alt="–§–æ—Ç–æ –±–ª—é–¥–∞">
      <p id="recipeText"></p>

      <div id="recipeEditor" style="display:none; flex-direction:column; gap:10px;">
        <textarea id="recipeInput" style="width:100%; height:150px; padding:10px;"></textarea>
        <button class="btn" onclick="saveRecipe()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
        <input type="file" id="imageInput" accept="image/*">
        <button class="btn" onclick="saveImage()">üì∏ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É</button>
      </div>

      <button class="btn" id="editBtn" onclick="editRecipe()">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
      <br>
      <button class="btn" id="backBtn" onclick="showMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
    </div>
  </main>

  <script>
    const defaultMenu = {
      breakfast: [{ name: "–û–º–ª–µ—Ç", recipe: "–Ø–π—Ü–∞ —Å –æ–≤–æ—â–∞–º–∏.", image: "" }],
      hot: [{ name: "–ë–æ—Ä—â", recipe: "–°–≤–µ–∫–ª–∞, –∫–∞–ø—É—Å—Ç–∞, –º—è—Å–æ.", image: "" }],
      bakery: [{ name: "–ö—Ä—É–∞—Å—Å–∞–Ω", recipe: "–°–ª–æ—ë–Ω–æ–µ —Ç–µ—Å—Ç–æ.", image: "" }],
      salads: [{ name: "–¶–µ–∑–∞—Ä—å", recipe: "–ö—É—Ä–∏—Ü–∞, —Å–∞–ª–∞—Ç, —Å–æ—É—Å.", image: "" }]
    };

    let menu = JSON.parse(localStorage.getItem("menu")) || defaultMenu;
    let currentCategory = null;
    let currentIndex = null;

    function saveMenu() { localStorage.setItem("menu", JSON.stringify(menu)); }

    function renderMenu() {
      for (const cat in menu) {
        const ul = document.getElementById(cat);
        if (!ul) continue;
        ul.innerHTML = "";
        if (menu[cat].length === 0) {
          ul.innerHTML = "<li style='text-align:center; color:#888;'>–ù–µ—Ç –±–ª—é–¥</li>";
        }
        menu[cat].forEach((dish, i) => {
          const li = document.createElement("li");
          li.innerHTML = `
            <div class="dish-info" onclick="showRecipe('${cat}', ${i})">
              ${dish.image ? `<img src="${dish.image}">` : ""}
              <span>${dish.name}</span>
            </div>
            <button class="delete-btn" onclick="deleteDish('${cat}', ${i}, event)">‚ùå</button>
          `;
          ul.appendChild(li);
        });
      }
    }

    function addDish(cat) {
      const name = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª—é–¥–∞:");
      if (!name) return;
      menu[cat].push({ name, recipe: "", image: "" });
      saveMenu();
      renderMenu();
    }

    function deleteDish(cat, i, e) {
      e.stopPropagation();
      const dish = menu[cat][i];
      if (!confirm(`–£–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ "${dish.name}"?`)) return;
      menu[cat].splice(i, 1);
      saveMenu();
      renderMenu();
    }

    function showRecipe(cat, i) {
      currentCategory = cat;
      currentIndex = i;
      const dish = menu[cat][i];
      document.getElementById("pageTitle").innerText = dish.name;
      document.getElementById("menuPage").classList.remove("active");
      document.getElementById("recipePage").classList.add("active");
      document.getElementById("recipeTitle").innerText = dish.name;
      document.getElementById("recipeText").innerText = dish.recipe || "–†–µ—Ü–µ–ø—Ç –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω.";
      document.getElementById("recipeImage").style.display = dish.image ? "block" : "none";
      if (dish.image) document.getElementById("recipeImage").src = dish.image;
    }

    function editRecipe() {
      const dish = menu[currentCategory][currentIndex];
      document.getElementById("recipeText").style.display = "none";
      document.getElementById("recipeEditor").style.display = "flex";
      document.getElementById("recipeInput").value = dish.recipe || "";
      document.getElementById("editBtn").style.display = "none";
    }

    function saveRecipe() {
      const newRecipe = document.getElementById("recipeInput").value;
      menu[currentCategory][currentIndex].recipe = newRecipe.trim();
      saveMenu();
      showRecipe(currentCategory, currentIndex);
      document.getElementById("recipeText").style.display = "block";
      document.getElementById("recipeEditor").style.display = "none";
      document.getElementById("editBtn").style.display = "inline-block";
    }

    function saveImage() {
      const file = document.getElementById("imageInput").files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = e => {
        menu[currentCategory][currentIndex].image = e.target.result;
        saveMenu();
        showRecipe(currentCategory, currentIndex);
      };
      reader.readAsDataURL(file);
    }

    function showMenu() {
      document.getElementById("pageTitle").innerText = "–ú–µ–Ω—é";
      document.getElementById("menuPage").classList.add("active");
      document.getElementById("recipePage").classList.remove("active");
    }

    // –¢–µ–º–∞
    const themeToggle = document.getElementById("themeToggle");
    function applyTheme() {
      if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark");
        themeToggle.innerText = "‚òÄÔ∏è –¢–µ–º–∞";
      } else {
        document.body.classList.remove("dark");
        themeToggle.innerText = "üåô –¢–µ–º–∞";
      }
    }
    themeToggle.addEventListener("click", () => {
      const newTheme = document.body.classList.contains("dark") ? "light" : "dark";
      localStorage.setItem("theme", newTheme);
      applyTheme();
    });
    applyTheme();

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    document.getElementById("refreshBtn").addEventListener("click", () => location.reload());

    renderMenu();
  </script>
</body>
</html>
